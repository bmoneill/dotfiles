#!/bin/sh

# Set as a cron job to check for new RSS entries for newsboat.
# If newsboat is open, sends it an "R" key to refresh.

ping -q -c 1 1.1.1.1 > /dev/null || exit

echo ðŸ”ƒ > /tmp/newsupdate
pkill -RTMIN+6 dwmblocks
pgrep -x newsboat >/dev/null && /usr/bin/xdotool key --window "$(/usr/bin/xdotool search --name newsboat)" R || (/usr/bin/newsboat -x reload && echo "$(newsboat -x print-unread) " > ~/.config/newsboat/.unread)
rm -f /tmp/newsupdate


pkill -RTMIN+6 dwmblocks
