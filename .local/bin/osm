#!/bin/sh
# elvis: osm (Open Street Maps)
# author: Ben O'Neill
# 2020-05-10

. surfraw || exit 1

w3_config_hook () {
    def SURFRAW_osm_categories  "$SURFRAW_categories"
    def SURFRAW_osm_base_url    "$SURFRAW_url"
}

w3_usage_hook () {
    cat <<EOF

Usage: $w3_argv0 [options] [search words]...
Description:
  Use the Open Street Maps engine
EOF
    w3_global_usage
}

w3_parse_option_hook () {
    opt="$1"
    optarg="$2"
    case "$opt" in
    -c*=*)   setopt   SURFRAW_osm_categories   $optarg ;;
    -u*=*)   setopt   SURFRAW_osm_base_url     $optarg ;;
    *) return 1 ;;
    esac
    return 0
}

w3_config
w3_parse_args "$@"

# w3_args now contains a list of arguments
escaped_args=$(w3_url_of_arg $w3_args)

w3_browse_url "https://openstreetmap.org/search?query=${escaped_args}"
